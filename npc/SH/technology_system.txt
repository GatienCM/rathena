// Version CORRIGÉE basée sur ta suggestion, utilisant la bonne structure et la bonne variable pour OnPickup

// Associe ce script à l'item 512
-	script	PickupTestScript	512,{ // Utilise l'ItemID (512) et une seule accolade ouvrante

	// Le label OnPickup: DOIT être à l'intérieur des accolades principales {}
	OnPickup:
		// Utilise dispbottom pour afficher un message en bas de l'écran
		dispbottom ">>> OnPickup déclenché ! ID Ramassé: " + getitemid; // Utilise getitemid ici

		// Vérifie si l'item ramassé est bien celui attendu (512)
		if (getitemid == 512) {
			dispbottom "Confirmation: Item 512 (Pomme) ramassé.";
			// C'est ici que tu mettrais la logique de vérification/mise à jour de la variable globale,
			// l'annonce serveur, le message au joueur, et le delitem.
			// Exemple simplifié:
			// .@status = getglobalreg("TPRD01");
			// dispbottom "Statut global lu: " + .@status;
			// if (.@status == 0) { setglobalreg("TPRD01",1); dispbottom "Variable globale mise à 1."; }
			// delitem getitemid, 1; dispbottom "Item supprimé.";

		} else {
			// Optionnel: message si un autre item déclenche ce script (ne devrait pas arriver si bien lié)
			dispbottom "Info: Item " + getitemid + " ramassé (pas 512).";
		}

		// Termine l'exécution du label OnPickup
		end;

	// D'autres labels comme OnInit pourraient être ici, mais toujours dans les accolades principales.
	OnInit:
	    end;

} // Accolade fermante finale du script principal